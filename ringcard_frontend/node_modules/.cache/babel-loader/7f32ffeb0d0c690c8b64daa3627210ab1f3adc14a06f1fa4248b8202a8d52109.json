{"ast":null,"code":"import _objectSpread from\"/Users/kiyujin/Dev/ringcard/ringcard_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/kiyujin/Dev/ringcard/ringcard_frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/kiyujin/Dev/ringcard/ringcard_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/kiyujin/Dev/ringcard/ringcard_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useForm}from\"react-hook-form\";import\"../styles/answerQuestionNote.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AnswerForm(props){var questionId=String(props.questionId);// place holder로 넣음.\nvar PropsOldAnswer=String(props.oldAnswer);var _useState=useState(),_useState2=_slicedToArray(_useState,2),oldAnswer=_useState2[0],setOldAnswer=_useState2[1];useEffect(function(){setOldAnswer(PropsOldAnswer);},[PropsOldAnswer]);var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return new Promise(function(r){return setTimeout(r,100);});case 2:// alert(JSON.stringify(data));\nconsole.log(data);_context.next=5;return axios.post(\"/question/\"+questionId+\"/edit/user\",data).then(function(res){console.log(\"posthere\");console.log(data);// window.location.href = \"/question/\" + questionId + \"/completed/user\";\n}).catch(function(error){if(error.response){// The request was made and the server responded with a status code\n// that falls out of the range of 2xx\nconsole.log(error.response.data);console.log(error.response.status);console.log(error.response.headers);}else if(error.request){// The request was made but no response was received\n// `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n// http.ClientRequest in node.js\nconsole.log(error.request);}else{// Something happened in setting up the request that triggered an Error\nconsole.log(\"Error\",error.message);}console.log(error.config);});case 5:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,isSubmitting=_useForm$formState.isSubmitting,isDirty=_useForm$formState.isDirty,errors=_useForm$formState.errors;// 디폴트 밸류로 예전 값 넣는 방법.\n// TODO: 근데 디폴트값이랑 현재값 연동이 안 돼서 보류\n// const {\n// \tregister,\n// \thandleSubmit,\n// \treset,\n// \tformState: { isSubmitting, isDirty, errors },\n// } = useForm({ defaultValues: oldAnswer });\n// useEffect(() => {\n// \tsetOldAnswer(props.oldAnswer);\n// \treset(props.oldAnswer);\n// }, [props.oldAnswer]);\n// 유저 입력 값을 넣을 변수\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),checkItemContent=_useState4[0],setCheckItemContent=_useState4[1];// 줄 수를 계산해서 저장할 변수\nvar _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),textareaHeight=_useState6[0],setTextareaHeight=_useState6[1];// 사용자 입력 값이 변경될 때마다 checkItemContent에 저장하고\n// 엔터('\\n') 개수를 세서 textareaHeight에 저장\nvar checkItemChangeHandler=function checkItemChangeHandler(event){setTextareaHeight(event.target.value.split(\"\\n\").length-1);setCheckItemContent(event.target.value);};return/*#__PURE__*/_jsxs(\"form\",{className:\"answerForm-answer-form\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"answerForm-text-box checkItem\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cursur-bar\",children:\"|\"}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread({id:\"answerAdd\",className:\"answerForm-textarea\",value:checkItemContent,onInput:checkItemChangeHandler,style:{height:(textareaHeight+1)*27+\"px\"},placeholder:oldAnswer},register(\"answerContents\",{required:\"답변이 입력되지 않았습니다.\"})))]}),/*#__PURE__*/_jsx(\"div\",{className:\"answerForm-btn-box\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:/*#__PURE__*/_jsx(\"img\",{className:\"note-send-answer-btn\",src:\"/buttons/send-answer-btn.svg\",alt:\"\"})})})]});}export default AnswerForm;","map":{"version":3,"names":["axios","useEffect","useState","useForm","AnswerForm","props","questionId","String","PropsOldAnswer","oldAnswer","setOldAnswer","onSubmit","data","Promise","r","setTimeout","console","log","post","then","res","catch","error","response","status","headers","request","message","config","register","handleSubmit","formState","isSubmitting","isDirty","errors","checkItemContent","setCheckItemContent","textareaHeight","setTextareaHeight","checkItemChangeHandler","event","target","value","split","length","height","required"],"sources":["/Users/kiyujin/Dev/ringcard/ringcard_frontend/src/components/EditAnswerForm.tsx"],"sourcesContent":["import axios from \"axios\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport \"../styles/answerQuestionNote.css\";\n\nexport interface Props {\n\tquestionId: number;\n\toldAnswer: String;\n}\n\nfunction AnswerForm(props: Props) {\n\tconst questionId = String(props.questionId);\n\n\t// place holder로 넣음.\n\tconst PropsOldAnswer = String(props.oldAnswer);\n\tconst [oldAnswer, setOldAnswer] = useState<any>();\n\tuseEffect(() => {\n\t\tsetOldAnswer(PropsOldAnswer);\n\t}, [PropsOldAnswer]);\n\n\tconst onSubmit = async (data: any) => {\n\t\tawait new Promise((r) => setTimeout(r, 100));\n\n\t\t// alert(JSON.stringify(data));\n\t\tconsole.log(data);\n\n\t\tawait axios\n\t\t\t.post(\"/question/\" + questionId + \"/edit/user\", data)\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log(\"posthere\");\n\t\t\t\tconsole.log(data);\n\t\t\t\t// window.location.href = \"/question/\" + questionId + \"/completed/user\";\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tif (error.response) {\n\t\t\t\t\t// The request was made and the server responded with a status code\n\t\t\t\t\t// that falls out of the range of 2xx\n\t\t\t\t\tconsole.log(error.response.data);\n\t\t\t\t\tconsole.log(error.response.status);\n\t\t\t\t\tconsole.log(error.response.headers);\n\t\t\t\t} else if (error.request) {\n\t\t\t\t\t// The request was made but no response was received\n\t\t\t\t\t// `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n\t\t\t\t\t// http.ClientRequest in node.js\n\t\t\t\t\tconsole.log(error.request);\n\t\t\t\t} else {\n\t\t\t\t\t// Something happened in setting up the request that triggered an Error\n\t\t\t\t\tconsole.log(\"Error\", error.message);\n\t\t\t\t}\n\t\t\t\tconsole.log(error.config);\n\t\t\t});\n\t};\n\n\tconst {\n\t\tregister,\n\t\thandleSubmit,\n\t\tformState: { isSubmitting, isDirty, errors },\n\t} = useForm();\n\n\t// 디폴트 밸류로 예전 값 넣는 방법.\n\t// TODO: 근데 디폴트값이랑 현재값 연동이 안 돼서 보류\n\t// const {\n\t// \tregister,\n\t// \thandleSubmit,\n\t// \treset,\n\t// \tformState: { isSubmitting, isDirty, errors },\n\t// } = useForm({ defaultValues: oldAnswer });\n\t// useEffect(() => {\n\t// \tsetOldAnswer(props.oldAnswer);\n\t// \treset(props.oldAnswer);\n\t// }, [props.oldAnswer]);\n\n\t// 유저 입력 값을 넣을 변수\n\tconst [checkItemContent, setCheckItemContent] = useState(\"\");\n\t// 줄 수를 계산해서 저장할 변수\n\tconst [textareaHeight, setTextareaHeight] = useState(0);\n\n\t// 사용자 입력 값이 변경될 때마다 checkItemContent에 저장하고\n\t// 엔터('\\n') 개수를 세서 textareaHeight에 저장\n\tconst checkItemChangeHandler = (event: any) => {\n\t\tsetTextareaHeight(event.target.value.split(\"\\n\").length - 1);\n\t\tsetCheckItemContent(event.target.value);\n\t};\n\n\treturn (\n\t\t<form className=\"answerForm-answer-form\" onSubmit={handleSubmit(onSubmit)}>\n\t\t\t<div className=\"answerForm-text-box checkItem\">\n\t\t\t\t<span className=\"cursur-bar\">|</span>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"answerAdd\"\n\t\t\t\t\tclassName=\"answerForm-textarea\"\n\t\t\t\t\tvalue={checkItemContent}\n\t\t\t\t\tonInput={checkItemChangeHandler}\n\t\t\t\t\tstyle={{ height: (textareaHeight + 1) * 27 + \"px\" }}\n\t\t\t\t\tplaceholder={oldAnswer}\n\t\t\t\t\t{...register(\"answerContents\", {\n\t\t\t\t\t\trequired: \"답변이 입력되지 않았습니다.\",\n\t\t\t\t\t})}\n\t\t\t\t></textarea>\n\t\t\t</div>\n\t\t\t<div className=\"answerForm-btn-box\">\n\t\t\t\t<button type=\"submit\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"note-send-answer-btn\"\n\t\t\t\t\t\tsrc=\"/buttons/send-answer-btn.svg\"\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t);\n}\n\nexport default AnswerForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}