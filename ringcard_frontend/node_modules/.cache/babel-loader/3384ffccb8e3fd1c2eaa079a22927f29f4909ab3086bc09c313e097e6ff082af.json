{"ast":null,"code":"import _objectSpread from\"C:/Users/yuleg/Dev/Ringca/ORIN33copy/ringcard/ringcard_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/yuleg/Dev/Ringca/ORIN33copy/ringcard/ringcard_frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/yuleg/Dev/Ringca/ORIN33copy/ringcard/ringcard_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/yuleg/Dev/Ringca/ORIN33copy/ringcard/ringcard_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useForm}from\"react-hook-form\";import\"../../styles/answerQuestionNote.css\";import TextareaAutosize from\"react-textarea-autosize\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AnswerForm(props){var questionId=String(props.questionId);var PropsOldAnswer=String(props.oldAnswer);var _useState=useState(),_useState2=_slicedToArray(_useState,2),oldAnswer=_useState2[0],setOldAnswer=_useState2[1];useEffect(function(){setOldAnswer(PropsOldAnswer);},[PropsOldAnswer]);var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return new Promise(function(r){return setTimeout(r,100);});case 2:_context.next=4;return axios.post(\"/question/\"+questionId+\"/edit/user\",data).then(function(res){window.location.replace(\"/question/\"+questionId+\"/completed/user\");}).catch(function(error){console.log(error.config);});case 4:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;function checkLengthHandler(event){var text=event.target.value;var test_length=text.length;//최대 글자수\nvar max_length=5000;if(test_length>max_length){alert(max_length+\"자 이상 작성할 수 없습니다.\");text=text.substr(0,max_length);event.target.value=text;event.target.focus();}}return/*#__PURE__*/_jsxs(\"form\",{className:\"answerForm-answer-form\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"answerForm-text-box checkItem\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cursur-bar\",children:\"|\"}),/*#__PURE__*/_jsx(TextareaAutosize,_objectSpread({id:\"answerAdd\",className:\"answerForm-textarea\",defaultValue:oldAnswer,onKeyUp:checkLengthHandler,rows:5,maxRows:10},register(\"answerContents\",{required:\"답변이 입력되지 않았습니다.\"})))]}),/*#__PURE__*/_jsx(\"div\",{className:\"answerForm-btn-box\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:/*#__PURE__*/_jsx(\"img\",{className:\"note-send-answer-btn\",src:\"/buttons/send-answer-btn.svg\",alt:\"\"})})})]});}export default AnswerForm;","map":{"version":3,"names":["axios","useEffect","useState","useForm","TextareaAutosize","AnswerForm","props","questionId","String","PropsOldAnswer","oldAnswer","setOldAnswer","onSubmit","data","Promise","r","setTimeout","post","then","res","window","location","replace","catch","error","console","log","config","register","handleSubmit","checkLengthHandler","event","text","target","value","test_length","length","max_length","alert","substr","focus","required"],"sources":["C:/Users/yuleg/Dev/Ringca/ORIN33copy/ringcard/ringcard_frontend/src/components/AnswerNote/EditAnswerForm.tsx"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport \"../../styles/answerQuestionNote.css\";\nimport TextareaAutosize from \"react-textarea-autosize\";\n\nexport interface Props {\n\tquestionId: number;\n\toldAnswer: String;\n}\n\nfunction AnswerForm(props: Props) {\n\tconst questionId = String(props.questionId);\n\tconst PropsOldAnswer = String(props.oldAnswer);\n\tconst [oldAnswer, setOldAnswer] = useState<any>();\n\tuseEffect(() => {\n\t\tsetOldAnswer(PropsOldAnswer);\n\t}, [PropsOldAnswer]);\n\n\tconst onSubmit = async (data: any) => {\n\t\tawait new Promise((r) => setTimeout(r, 100));\n\t\tawait axios\n\t\t\t.post(\"/question/\" + questionId + \"/edit/user\", data)\n\t\t\t.then((res) => {\n\t\t\t\twindow.location.replace(\"/question/\" + questionId + \"/completed/user\");\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(error.config);\n\t\t\t});\n\t};\n\n\tconst {\n\t\tregister,\n\t\thandleSubmit,\n\t} = useForm();\n\n\tfunction checkLengthHandler(event: any) {\n\t\tvar text = event.target.value;\n\t\tvar test_length = text.length;\n\n\t\t//최대 글자수\n\t\tvar max_length = 5000;\n\n\t\tif (test_length > max_length) {\n\t\t\talert(max_length + \"자 이상 작성할 수 없습니다.\");\n\t\t\ttext = text.substr(0, max_length);\n\t\t\tevent.target.value = text;\n\t\t\tevent.target.focus();\n\t\t}\n\t}\n\n\treturn (\n\t\t<form className=\"answerForm-answer-form\" onSubmit={handleSubmit(onSubmit)}>\n\t\t\t<div className=\"answerForm-text-box checkItem\">\n\t\t\t\t<span className=\"cursur-bar\">|</span>\n\t\t\t\t<TextareaAutosize\n\t\t\t\t\tid=\"answerAdd\"\n\t\t\t\t\tclassName=\"answerForm-textarea\"\n\t\t\t\t\tdefaultValue={oldAnswer}\n\t\t\t\t\tonKeyUp={checkLengthHandler}\n\t\t\t\t\trows={5}\n\t\t\t\t\tmaxRows={10}\n\t\t\t\t\t{...register(\"answerContents\", {\n\t\t\t\t\t\trequired: \"답변이 입력되지 않았습니다.\",\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"answerForm-btn-box\">\n\t\t\t\t<button type=\"submit\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"note-send-answer-btn\"\n\t\t\t\t\t\tsrc=\"/buttons/send-answer-btn.svg\"\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t);\n}\n\nexport default AnswerForm;\n"],"mappings":"mmBAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,OAAO,KAAQ,iBAAiB,CACzC,MAAO,qCAAqC,CAC5C,MAAOC,iBAAgB,KAAM,yBAAyB,CAAC,wFAOvD,QAASC,WAAU,CAACC,KAAY,CAAE,CACjC,GAAMC,WAAU,CAAGC,MAAM,CAACF,KAAK,CAACC,UAAU,CAAC,CAC3C,GAAME,eAAc,CAAGD,MAAM,CAACF,KAAK,CAACI,SAAS,CAAC,CAC9C,cAAkCR,QAAQ,EAAO,wCAA1CQ,SAAS,eAAEC,YAAY,eAC9BV,SAAS,CAAC,UAAM,CACfU,YAAY,CAACF,cAAc,CAAC,CAC7B,CAAC,CAAE,CAACA,cAAc,CAAC,CAAC,CAEpB,GAAMG,SAAQ,4FAAG,iBAAOC,IAAS,0IAC1B,IAAIC,QAAO,CAAC,SAACC,CAAC,QAAKC,WAAU,CAACD,CAAC,CAAE,GAAG,CAAC,GAAC,8BACtCf,MAAK,CACTiB,IAAI,CAAC,YAAY,CAAGV,UAAU,CAAG,YAAY,CAAEM,IAAI,CAAC,CACpDK,IAAI,CAAC,SAACC,GAAG,CAAK,CACdC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,YAAY,CAAGf,UAAU,CAAG,iBAAiB,CAAC,CACvE,CAAC,CAAC,CACDgB,KAAK,CAAC,SAAUC,KAAK,CAAE,CACvBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAACG,MAAM,CAAC,CAC1B,CAAC,CAAC,uDACH,kBAVKf,SAAQ,4CAUb,CAED,aAGIT,OAAO,EAAE,CAFZyB,QAAQ,UAARA,QAAQ,CACRC,YAAY,UAAZA,YAAY,CAGb,QAASC,mBAAkB,CAACC,KAAU,CAAE,CACvC,GAAIC,KAAI,CAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAC7B,GAAIC,YAAW,CAAGH,IAAI,CAACI,MAAM,CAE7B;AACA,GAAIC,WAAU,CAAG,IAAI,CAErB,GAAIF,WAAW,CAAGE,UAAU,CAAE,CAC7BC,KAAK,CAACD,UAAU,CAAG,kBAAkB,CAAC,CACtCL,IAAI,CAAGA,IAAI,CAACO,MAAM,CAAC,CAAC,CAAEF,UAAU,CAAC,CACjCN,KAAK,CAACE,MAAM,CAACC,KAAK,CAAGF,IAAI,CACzBD,KAAK,CAACE,MAAM,CAACO,KAAK,EAAE,CACrB,CACD,CAEA,mBACC,cAAM,SAAS,CAAC,wBAAwB,CAAC,QAAQ,CAAEX,YAAY,CAACjB,QAAQ,CAAE,wBACzE,aAAK,SAAS,CAAC,+BAA+B,wBAC7C,aAAM,SAAS,CAAC,YAAY,eAAS,cACrC,KAAC,gBAAgB,gBAChB,EAAE,CAAC,WAAW,CACd,SAAS,CAAC,qBAAqB,CAC/B,YAAY,CAAEF,SAAU,CACxB,OAAO,CAAEoB,kBAAmB,CAC5B,IAAI,CAAE,CAAE,CACR,OAAO,CAAE,EAAG,EACRF,QAAQ,CAAC,gBAAgB,CAAE,CAC9Ba,QAAQ,CAAE,iBACX,CAAC,CAAC,EACD,GACG,cACN,YAAK,SAAS,CAAC,oBAAoB,uBAClC,eAAQ,IAAI,CAAC,QAAQ,uBACpB,YACC,SAAS,CAAC,sBAAsB,CAChC,GAAG,CAAC,8BAA8B,CAClC,GAAG,CAAC,EAAE,EACL,EACM,EACJ,GACA,CAET,CAEA,cAAepC,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}