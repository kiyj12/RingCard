{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.accessTokenSignature = exports.requestTokenSignature = void 0;\nvar crypto_js_1 = require(\"crypto-js\");\nexports.requestTokenSignature = function (_a) {\n  var method = _a.method,\n    apiUrl = _a.apiUrl,\n    callbackUrl = _a.callbackUrl,\n    consumerKey = _a.consumerKey,\n    consumerSecret = _a.consumerSecret;\n  var params = {\n    oauth_consumer_key: consumerKey,\n    oauth_version: \"1.0\",\n    oauth_signature_method: \"HMAC-SHA1\",\n    oauth_callback: callbackUrl,\n    oauth_timestamp: (Date.now() / 1000).toFixed(),\n    oauth_nonce: Math.random().toString(36).replace(/[^a-z]/, \"\").substr(2)\n  };\n  return makeSignature(params, method, apiUrl, consumerSecret);\n};\nexports.accessTokenSignature = function (_a) {\n  var consumerKey = _a.consumerKey,\n    consumerSecret = _a.consumerSecret,\n    oauthToken = _a.oauthToken,\n    oauthVerifier = _a.oauthVerifier,\n    method = _a.method,\n    apiUrl = _a.apiUrl;\n  var params = {\n    oauth_consumer_key: consumerKey,\n    oauth_version: \"1.0\",\n    oauth_signature_method: \"HMAC-SHA1\",\n    oauth_token: oauthToken,\n    oauth_verifier: oauthVerifier,\n    oauth_timestamp: (Date.now() / 1000).toFixed(),\n    oauth_nonce: Math.random().toString(36).replace(/[^a-z]/, \"\").substr(2)\n  };\n  return makeSignature(params, method, apiUrl, consumerSecret);\n};\nvar makeSignature = function (params, method, apiUrl, consumerSecret) {\n  var paramsBaseString = Object.keys(params).sort().reduce(function (prev, el) {\n    return prev += \"&\" + el + \"=\" + params[el];\n  }, \"\").substr(1);\n  var signatureBaseString = method.toUpperCase() + \"&\" + encodeURIComponent(apiUrl) + \"&\" + encodeURIComponent(paramsBaseString);\n  var signingKey = encodeURIComponent(consumerSecret) + \"&\";\n  var oauth_signature = crypto_js_1.enc.Base64.stringify(crypto_js_1.HmacSHA1(signatureBaseString, signingKey));\n  var paramsWithSignature = __assign(__assign({}, params), {\n    oauth_signature: encodeURIComponent(oauth_signature)\n  });\n  return Object.keys(paramsWithSignature).sort().reduce(function (prev, el) {\n    return prev += \",\" + el + \"=\\\"\" + paramsWithSignature[el] + \"\\\"\";\n  }, \"\").substr(1);\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;AAAA;AAEaA,6BAAqB,GAAG,UAACC,EAYrC;MAXCC,MAAM;IACNC,MAAM;IACNC,WAAW;IACXC,WAAW;IACXC,cAAc;EAQd,IAAMC,MAAM,GAAG;IACbC,kBAAkB,EAAEH,WAAW;IAC/BI,aAAa,EAAE,KAAK;IACpBC,sBAAsB,EAAE,WAAW;IACnCC,cAAc,EAAEP,WAAW;IAC3BQ,eAAe,EAAE,CAACC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,EAAEC,OAAO,EAAE;IAC9CC,WAAW,EAAEC,IAAI,CAACC,MAAM,EAAE,CACvBC,QAAQ,CAAC,EAAE,CAAC,CACZC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CACrBC,MAAM,CAAC,CAAC;GACZ;EAED,OAAOC,aAAa,CAACf,MAAM,EAAEL,MAAM,EAAEC,MAAM,EAAEG,cAAc,CAAC;AAC9D,CAAC;AAEYN,4BAAoB,GAAG,UAACC,EAcpC;MAbCI,WAAW;IACXC,cAAc;IACdiB,UAAU;IACVC,aAAa;IACbtB,MAAM;IACNC,MAAM;EASN,IAAMI,MAAM,GAAG;IACbC,kBAAkB,EAAEH,WAAW;IAC/BI,aAAa,EAAE,KAAK;IACpBC,sBAAsB,EAAE,WAAW;IACnCe,WAAW,EAAEF,UAAU;IACvBG,cAAc,EAAEF,aAAa;IAC7BZ,eAAe,EAAE,CAACC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,EAAEC,OAAO,EAAE;IAC9CC,WAAW,EAAEC,IAAI,CAACC,MAAM,EAAE,CACvBC,QAAQ,CAAC,EAAE,CAAC,CACZC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CACrBC,MAAM,CAAC,CAAC;GACZ;EAED,OAAOC,aAAa,CAACf,MAAM,EAAEL,MAAM,EAAEC,MAAM,EAAEG,cAAc,CAAC;AAC9D,CAAC;AAED,IAAMgB,aAAa,GAAG,UACpBf,MAAW,EACXL,MAAc,EACdC,MAAc,EACdG,cAAsB;EAEtB,IAAMqB,gBAAgB,GAAGC,MAAM,CAACC,IAAI,CAACtB,MAAM,CAAC,CACzCuB,IAAI,EAAE,CACNC,MAAM,CAAC,UAACC,IAAY,EAAEC,EAAO;IAC5B,OAAQD,IAAI,IAAI,MAAIC,EAAE,SAAI1B,MAAM,CAAC0B,EAAE,CAAG;EACxC,CAAC,EAAE,EAAE,CAAC,CACLZ,MAAM,CAAC,CAAC,CAAC;EAEZ,IAAMa,mBAAmB,GAAMhC,MAAM,CAACiC,WAAW,EAAE,SAAIC,kBAAkB,CACvEjC,MAAM,CACP,SAAIiC,kBAAkB,CAACT,gBAAgB,CAAG;EAE3C,IAAMU,UAAU,GAAMD,kBAAkB,CAAC9B,cAAc,CAAC,MAAG;EAE3D,IAAMgC,eAAe,GAAGC,eAAG,CAACC,MAAM,CAACC,SAAS,CAC1CF,oBAAQ,CAACL,mBAAmB,EAAEG,UAAU,CAAC,CAC1C;EAED,IAAMK,mBAAmB,yBACpBnC,MAAM;IACT+B,eAAe,EAAEF,kBAAkB,CAACE,eAAe;EAAC,EACrD;EAED,OAAOV,MAAM,CAACC,IAAI,CAACa,mBAAmB,CAAC,CACpCZ,IAAI,EAAE,CACNC,MAAM,CAAC,UAACC,IAAY,EAAEC,EAAO;IAC5B,OAAQD,IAAI,IAAI,MAAIC,EAAE,WAAKS,mBAAmB,CAACT,EAAE,CAAC,OAAG;EACvD,CAAC,EAAE,EAAE,CAAC,CACLZ,MAAM,CAAC,CAAC,CAAC;AACd,CAAC","names":["exports","_a","method","apiUrl","callbackUrl","consumerKey","consumerSecret","params","oauth_consumer_key","oauth_version","oauth_signature_method","oauth_callback","oauth_timestamp","Date","now","toFixed","oauth_nonce","Math","random","toString","replace","substr","makeSignature","oauthToken","oauthVerifier","oauth_token","oauth_verifier","paramsBaseString","Object","keys","sort","reduce","prev","el","signatureBaseString","toUpperCase","encodeURIComponent","signingKey","oauth_signature","crypto_js_1","Base64","stringify","paramsWithSignature"],"sources":["../../src/services/signature.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}